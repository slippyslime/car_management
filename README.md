### README: API для управления автомобилями и комментариями

---

## Описание проекта

Этот проект представляет собой REST API для управления данными об автомобилях и их комментариями. API поддерживает операции CRUD для автомобилей и позволяет пользователям оставлять комментарии к ним. Проект разработан с использованием Django и Django REST Framework (DRF).

---

## Функциональность

- **Управление автомобилями:**
  - Получение списка автомобилей.
  - Просмотр детальной информации об автомобиле.
  - Создание, обновление и удаление автомобилей.

- **Комментарии к автомобилям:**
  - Получение списка комментариев к конкретному автомобилю.
  - Создание комментариев.
  - Удаление комментариев (для авторов комментариев или администраторов).

- **Аутентификация и авторизация:**
  - Регистрация пользователей.
  - Получение токена для доступа через `JWT`.
  - Доступ к API только для авторизованных пользователей.

---

## Технологии

- **Язык разработки**: Python 3.10+
- **Фреймворк**: Django 4.x
- **Библиотека API**: Django REST Framework (DRF)
- **База данных**: SQLite (может быть заменена на PostgreSQL или другую базу данных)
- **Аутентификация**: JWT (используя библиотеку `djangorestframework-simplejwt`)

---

## Установка

### 1. Клонирование репозитория
```bash
git clone https://github.com/yourusername/car_api.git
cd car_api
```

### 2. Установка виртуального окружения
```bash
python -m venv .venv
source .venv/bin/activate  # Для Linux/MacOS
.venv\Scripts\activate     # Для Windows
```

### 3. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 4. Применение миграций
```bash
python manage.py migrate
```

### 5. Запуск сервера разработки
```bash
python manage.py runserver
```

---

## Использование

# !!! Можете взаимодействовать либо с API, либо с интерфейсом напрямую.

### Аутентификация
Для работы с защищенными маршрутами требуется получение токена доступа.

**(Все запросы которые будут ниже есть в коллекции Postman в директории с проектом)**

1. Зарегистрируйте нового пользователя:
   - **URL**: `POST /api/register/`
   - **Пример тела запроса**:
     ```json
     {
       "username": "testuser",
       "password": "testpassword",
       "email": "testuser@example.com"
     }
     ```

2. Получите токен:
   - **URL**: `POST /api/token/`
   - **Пример тела запроса**:
     ```json
     {
       "username": "testuser",
       "password": "testpassword"
     }
     ```
   - **Ответ**:
     ```json
     {
       "access": "your_access_token",
       "refresh": "your_refresh_token"
     }
     ```

3. Используйте токен для авторизации в запросах:
   - Добавьте в заголовки запросов:
     ```
     Authorization: Bearer your_access_token
     ```

### Основные маршруты API

#### 1. Автомобили
- **Получить список автомобилей:**
  - **URL**: `GET /api/cars/`
  - **Пример ответа**:
    ```json
    [
      {
        "id": 1,
        "brand": "Toyota",
        "model": "Camry",
        "year": 2020
      },
      ...
    ]
    ```

- **Создать автомобиль:**
  - **URL**: `POST /api/cars/`
  - **Пример тела запроса**:
    ```json
    {
      "brand": "Ford",
      "model": "Focus",
      "year": 2018
    }
    ```

- **Обновить данные автомобиля:**
  - **URL**: `PUT /api/cars/{car_id}/`

- **Удалить автомобиль:**
  - **URL**: `DELETE /api/cars/{car_id}/`

#### 2. Комментарии
- **Получить список комментариев для автомобиля:**
  - **URL**: `GET /api/cars/{car_id}/comments/`

- **Создать комментарий:**
  - **URL**: `POST /api/cars/{car_id}/comments/`
  - **Пример тела запроса**:
    ```json
    {
      "content": "Отличный автомобиль!"
    }
    ```

- **Удалить комментарий:**
  - **URL**: `DELETE /api/cars/{car_id}/comments/{comment_id}/`

---

## Тестирование

Для выполнения тестов используйте встроенный инструмент Django:

```bash
python manage.py test
```

---

## Структура проекта

```
car_api/
├── cars/
│   ├── models.py        # Модели данных
│   ├── serializers.py   # Сериализаторы
│   ├── views.py         # Логика обработки запросов
│   ├── urls.py          # Маршруты приложения
├── car_api/
│   ├── settings.py      # Настройки проекта
│   ├── urls.py          # Главные маршруты
│   ├── wsgi.py          # WSGI конфигурация
└── manage.py            # Управление проектом
```
